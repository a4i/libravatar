External dependencies
----------------------

- Python 2.6
- Django 1.2
- Apache 2 with mod_rewrite
- Python DNS 2.3.4
  (http://pydns.sourceforge.net/)
- jQuery 1.4
- Python Imaging Library
  (http://www.pythonware.com/library/)

(optional, if using LDAP authenticaion):

- Python LDAP library

On Debian unstable:

  apt-get install python-django apache2-mpm-prefork python-dns libjs-jquery python2.6 python-imaging libapache2-mod-wsgi python-psycopg2
  
  apt-get install python-ldap


Create your database
---------------------

Create a database user:

  sudo -u postgres createuser djangouser

Create a database:

  sudo -u postgres createdb -O djangouser libravatar


Apache Configuration
---------------------

Start by adding this to your /etc/hosts:

  127.0.0.1 www.libravatar.org secure.libravatar.org cdn.libravatar.org seccdn.libravatar.org

Enable mod_rewrite and mod_wsgi:

  a2enmod rewrite
  a2enmod wsgi

Create an uploaded/ directory that's writable by the www-data user:

  mkdir /home/francois/devel/remote/libravatar/uploaded
  sudo chgrp www-data /home/francois/devel/remote/libravatar/uploaded
  sudo chmod g+w /home/francois/devel/remote/libravatar/uploaded

Similarly, an avatar/ directory that's writable by the www-data user:

  mkdir /home/francois/devel/remote/libravatar/avatar
  sudo chgrp www-data /home/francois/devel/remote/libravatar/avatar
  sudo chmod g+w /home/francois/devel/remote/libravatar/avatar

Then copy config/*.conf to /etc/apache2/sites-enabled/ and restart
Apache using "/etc/init.d/apache2 restart".


Authenticating with an external LDAP server:
---------------------------------------------

Download and install the Django LDAP authentication backend. This is a BSD-
licensed module written by Peter Sagerson:

http://packages.python.org/django-auth-ldap/

The module can be checked out and installed as follows:

   hg clone http://bitbucket.org/psagers/django-auth-ldap
   sudo easy_install django-auth-ldap

Then uncomment the LDAP backend line in AUTHENTICATION_BACKENDS in your
settings.py and set your AUTH_LDAP_SERVER_URI and AUTH_LDAP_USER_DN_TEMPLATE
settings to something appropriate. More complex setups are also well documented
in the package documentation.

